"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = fetchPng;

var _pngjs = require("pngjs");

var _request = _interopRequireDefault(require("request"));

var _authForFetch = _interopRequireDefault(require("./authForFetch"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

async function fetchPng(url, {
  apiKey,
  apiSecret,
  endpoint
}) {
  return new Promise((resolve, reject) => {
    (0, _request.default)({
      url,
      auth: (0, _authForFetch.default)({
        url,
        apiKey,
        apiSecret,
        endpoint
      })
    }).on('error', reject).pipe(new _pngjs.PNG()).on('parsed', function handleParsed() {
      resolve(this);
    }).on('error', reject);
  });
}